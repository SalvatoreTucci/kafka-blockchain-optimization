FROM python:3.9-slim

# Install system dependencies
RUN apt-get update && apt-get install -y \
    curl \
    wget \
    netcat-traditional \
    && rm -rf /var/lib/apt/lists/*

# Install Python dependencies
RUN pip install \
    kafka-python==2.0.2 \
    prometheus-client==0.17.1 \
    pyyaml==6.0 \
    requests==2.31.0 \
    numpy==1.24.3 \
    pandas==2.0.3

# Install Kafka client tools
RUN wget -q https://archive.apache.org/dist/kafka/2.8.1/kafka_2.13-2.8.1.tgz && \
    tar -xzf kafka_2.13-2.8.1.tgz && \
    mv kafka_2.13-2.8.1 /opt/kafka && \
    rm kafka_2.13-2.8.1.tgz

ENV PATH="/opt/kafka/bin:${PATH}"

WORKDIR /workspace
CMD ["bash"]
